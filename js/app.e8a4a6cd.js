(function(){"use strict";var t={3717:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",[e("li",{staticClass:"nav-link text-white fw-bold",attrs:{"data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",role:"button"}},[t._v(" AskQuestion ")]),e("div",{staticClass:"modal fade",attrs:{id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg"},[e("div",{staticClass:"modal-content bg-dark"},[t._m(0),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-floating"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.question,expression:"question"}],staticClass:"question form-control bg-dark text-white shadow-none",staticStyle:{height:"200px",resize:"none","caret-color":"#fff"},attrs:{id:"question",placeholder:"your question here"},domProps:{value:t.question},on:{input:function(e){e.target.composing||(t.question=e.target.value)}}}),e("label",{staticClass:"text-capitalize text-white",attrs:{for:"question"}},[t._v("your question")])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn bg-gradient text-white",staticStyle:{"background-color":"gray"},attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v(" Close ")]),e("button",{staticClass:"btn bg-gradient text-white",staticStyle:{"background-color":"#394f8a"},attrs:{type:"button"},on:{click:t.createQuestion}},[t._v(" Ask ")])])])])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h1",{staticClass:"modal-title text-capitalize fs-5 text-white",attrs:{id:"staticBackdropLabel"}},[t._v(" new question ")])])}],i={name:"AskQuestionView",data:function(){return{question:"",error:!1}},methods:{createQuestion:function(){this.question.trim()&&fetch("/server/api/Questions/createQuestion.php",{method:"POST",body:JSON.stringify({user_id:this.$store.state.user_id,question:this.question})}).then((()=>{"profile"===this.$route.name||this.$router.replace({name:"profile"}),this.$router.go(),this.question=""})).catch((()=>{this.error=!0,setTimeout((()=>{this.error=!1}),3e3)}))}}},o=i,n=s(1001),l=(0,n.Z)(o,a,r,!1,null,"4faa2b89",null),c=l.exports},9509:function(t,e,s){s.d(e,{Z:function(){return i}});var a=s(4239),r=s(1600);function i(t){"profile"!==r.Z.currentRoute.name||t!==a.Z.getters.getUserId?t!==a.Z.getters.getUserId?r.Z.push({path:`/profile/${t}`}):r.Z.push({name:"profile"}):r.Z.go()}},9622:function(t,e,s){var a=s(6369),r=s(7956),i=s.n(r),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[this.$store.state.authenticated?e("NavBar"):t._e(),e("router-view")],1)},n=[],l=function(){var t=this,e=t._self._c;return e("header",{staticClass:"p-2 border-bottom border-opacity-25 border-secondary",attrs:{id:"header"}},[e("div",{staticClass:"d-flex justify-content-between align-items-md-center flex-column flex-md-row",staticStyle:{gap:"40px 5px"}},[e("div",{staticClass:"w-auto mx-auto mx-md-0"},[e("div",{staticClass:"dropdown-center text-white"},[e("div",{staticClass:"d-flex gap-2 align-items-center justify-content-center justify-content-md-start mb-2 mb-md-0 dropdown-toggle",attrs:{role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e("img",{staticClass:"rounded-circle",attrs:{src:"/server/uploads/"+this.$store.getters.getUserImage,width:"50px",height:"50px"}}),e("div",{staticClass:"text-white fw-bold"},[t._v(" "+t._s(this.$store.getters.getUserName)+" ")])]),e("ul",{staticClass:"dropdown-menu bg-dark shadow text-white"},[e("li",{staticClass:"dropdown-item text-white",attrs:{role:"button"},on:{click:t.redirect}},[t._v(" Profile ")]),e("li",{staticClass:"dropdown-item text-white",attrs:{role:"button"},on:{click:t.logOut}},[t._v(" LogOut ")])])])]),e("div",{staticClass:"position-relative col col-lg-5"},[e("div",{staticClass:"position-relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.pattern,expression:"pattern"}],staticClass:"form-control text-bg-dark shadow-none",staticStyle:{"padding-left":"40px"},attrs:{type:"search",placeholder:"Search The Users"},domProps:{value:t.pattern},on:{input:function(e){e.target.composing||(t.pattern=e.target.value)}}}),e("i",{staticClass:"fa fa-search text-white fs-4 position-absolute top-50 translate-middle",staticStyle:{left:"20px"}})]),t.isUsersExist?e("ul",{staticClass:"list-group position-absolute w-100 overflow-auto",staticStyle:{"z-index":"50",height:"400px"}},t._l(t.users,(function(s){return e("li",{key:s.user_id,staticClass:"list-group-item text-bg-dark bg-gradient ps-1",attrs:{role:"button"},on:{click:function(e){return t.showProfile(s.user_id)}}},[e("div",{staticClass:"hstack",staticStyle:{gap:"0 5px"}},[e("img",{staticClass:"rounded-circle",attrs:{src:"/server/uploads/"+s.image,alt:"userimage",width:"50px",height:"50px"}}),e("span",[t._v(t._s(s.username))])])])})),0):t._e()]),e("nav",{staticClass:"nav fs-6 justify-content-between justify-content-md-center"},[e("div",{staticClass:"position-relative"},[e("router-link",{staticClass:"nav-link text-white fw-bold text-capitalize",attrs:{to:"/messages"}},[t._v("messages")]),e("span",{staticClass:"position-absolute rounded-circle text-bg-danger top-0 start-0 d-flex justify-content-center align-items-center",staticStyle:{width:"1.3em",height:"1.3em"}},[t._v(t._s(t.numberOfUnReadMessages))])],1),e("AskQuestionView"),e("router-link",{staticClass:"nav-link text-white fw-bold text-capitalize",attrs:{to:"/forum"}},[t._v("allquestions")])],1)])])},c=[],d=s(3717),u=s(9509),m={name:"NavBar",components:{AskQuestionView:d.Z},data(){return{pattern:"",users:[],isUsersExist:!1,numberOfUnReadMessages:0}},methods:{showProfile(t){(0,u.Z)(t)},async search(){if(!this.pattern.trim())return void(this.isUsersExist=!1);const t=await fetch("/server/api/Users/searchUsers.php",{method:"POST",body:JSON.stringify({pattern:this.pattern.trim()}),headers:{"Content-Type":"application/json",Accept:"application/json"}}),e=await t.json();0!==e.length?(this.isUsersExist=!0,this.users=e):this.isUsersExist=!1},redirect(){"profile"!==this.$router.currentRoute.name?this.$router.push({name:"profile"}):this.$router.go()},logOut(){this.$store.commit("setAuthentication",!1),this.$store.commit("setUserName",null),this.$store.commit("setUserImage",null),this.$store.commit("setUserId",null),this.$router.replace({name:"LogIn"})},getNumberOfUnReadMessages(){fetch("/server/api/Messages/getNumberOfUnReadMessages.php",{method:"POST",body:JSON.stringify({receiver:this.$store.getters.getUserId}),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((t=>t.json())).then((t=>this.numberOfUnReadMessages=t.numberOfUnReadMessages))}},watch:{pattern(){this.search()}},mounted(){this.getNumberOfUnReadMessages(),setInterval((()=>{this.getNumberOfUnReadMessages()}),1e3)}},p=m,h=s(1001),g=(0,h.Z)(p,l,c,!1,null,null,null),v=g.exports,f={components:{NavBar:v}},b=f,w=(0,h.Z)(b,o,n,!1,null,null,null),x=w.exports,y=s(1600),C=s(4239);a.ZP.config.productionTip=!1,a.ZP.use(i()),new a.ZP({router:y.Z,store:C.Z,render:t=>t(x)}).$mount("#app")},1600:function(t,e,s){s.d(e,{Z:function(){return st}});var a=s(6369),r=s(2631),i=s(4239),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container d-flex justify-content-center align-items-center vh-100"},[e("transition",{attrs:{name:"fade",appear:""}},[e("form",{staticClass:"rounded p-sm-5 position-relative p-3 shadow text-white bg-gradient col col-md-9 col-lg-6 d-flex flex-column justify-content-center h-75",on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"position-absolute start-50 translate-middle fs-1 fw-bold text-capitalize",staticStyle:{top:"20%",color:"#ff6a3d","letter-spacing":"3px"}},[t._v(" login ")]),this.accountError?e("div",{staticClass:"alert text-bg-danger bg-gradient text-center text-capitalize col-12 col-xl-9 mx-auto"},[t._v(" "+t._s(t.accountError)+" ")]):t._e(),e("div",{staticClass:"form-group"},[e("div",{staticClass:"col-12 col-xl-9 mx-auto"},[e("label",{staticClass:"form-label fs-5",attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"email",staticClass:"form-control text-bg-dark border-0 shadow-none",attrs:{type:"email",id:"email"},domProps:{value:t.email},on:{change:t.validateEmail,input:function(e){e.target.composing||(t.email=e.target.value)}}}),this.emailError?e("span",{staticClass:"text-danger d-block text-capitalize"},[t._v(" "+t._s(t.emailError)+" ")]):t._e()]),e("div",{staticClass:"mt-3 col-12 col-xl-9 mx-auto"},[e("label",{staticClass:"form-label fs-5",attrs:{for:"password"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",staticClass:"form-control text-bg-dark border-0 shadow-none",attrs:{type:"password",id:"password",minlength:"5"},domProps:{value:t.password},on:{change:t.validatePassword,input:function(e){e.target.composing||(t.password=e.target.value)}}}),this.passwordError?e("span",{staticClass:"text-danger d-block text-capitalize"},[t._v(" "+t._s(t.passwordError)+" ")]):t._e()]),e("button",{staticClass:"d-block btn text-capitalize text-white bg-gradient col-12 col-xl-9 mx-auto mt-4 fs-4",staticStyle:{color:"#394f8a"},attrs:{disabled:t.isLoginDisabled},on:{click:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[t._v(" login ")])]),e("span",{staticClass:"text-white text-capitalize position-absolute bottom-0 start-50 translate-middle fs-5 col-12 text-center"},[t._v("don't have an account "),e("router-link",{staticClass:"text-decoration-none fw-bold text-capitalize",staticStyle:{color:"#ff6a3d"},attrs:{to:"/register"}},[t._v("register now")])],1)])])],1)},n=[],l={name:"LogInView",data:function(){return{email:"",password:"",emailError:"",accountError:"",passwordError:""}},computed:{isLoginDisabled(){return 0===this.email.length||this.password.length<5||!1===this.$refs.email.checkValidity()}},methods:{async checkForLoginUser(){this.accountError="",this.passwordError="";const t=await fetch("/server/api/Users/login.php",{method:"POST",body:JSON.stringify({email:this.email,password:this.password}),headers:{"Content-type":"application/json",Accept:"application/json"}}),e=await t.json();return e.accountError?(this.accountError=e.accountError,!1):e.passwordError?(this.passwordError=e.passwordError,!1):e},validateEmail(){this.$refs.email.checkValidity()?this.emailError="":this.emailError="wrong email format."},validatePassword(){this.password.length<5?this.passwordError="password must be at least five in length.":this.passwordError=""},async login(){const t=await this.checkForLoginUser();!1!==t&&(this.$store.commit("setUserName",t.username),this.$store.commit("setUserPassword",t.password),this.$store.commit("setUserId",t.user_id),this.$store.commit("setUserImage",t.userImage),this.$store.commit("setAuthentication",!0),this.$store.commit("setUserEmail",t.email),this.$store.commit("setUserDate",t.date),this.$store.commit("setUserAbout",t.about),this.$router.replace({name:"forum"}))}}},c=l,d=s(1001),u=(0,d.Z)(c,o,n,!1,null,null,null),m=u.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mt-5"},[t.isQuestionsExist?t._e():e("div",{staticClass:"d-flex justify-content-center align-items-center text-white fs-2 text-capitalize",staticStyle:{height:"70vh"}},[t._v(" there are no questions yet. ")]),t.isQuestionsExist?e("transition-group",{staticClass:"row row-cols-1 row-cols-md-3",staticStyle:{gap:"10px 0"},attrs:{appear:"",name:"fade",tag:"div"}},t._l(t.questions,(function(s){return e("div",{key:s.question_id,staticClass:"col"},[e("div",{staticClass:"card question bg-dark rounded-4 shadow-lg"},[e("div",{staticClass:"hstack",staticStyle:{width:"fit-content"},attrs:{role:"button"},on:{click:function(e){return t.showProfile(s.user_id)}}},[e("img",{staticClass:"m-2 rounded-circle",attrs:{src:"/server/uploads/"+s.image,width:"80px",height:"80px"}}),e("div",{staticClass:"text-white"},[t._v(t._s(s.username))])]),e("div",{staticClass:"card-body"},[e("p",{directives:[{name:"snip",rawName:"v-snip",value:{lines:2},expression:"{ lines: 2 }"}],staticClass:"card-text text-white",staticStyle:{"white-space":"pre-wrap",height:"50px"}},[t._v(" "+t._s(s.question)+" ")]),e("router-link",{staticClass:"view btn bg-gradient col-5 text-white",attrs:{to:{path:`question/${s.question_id}`}}},[t._v(" View ")]),s.username===t.username?e("button",{staticClass:"btn bg-danger bg-gradient text-white mx-2 col-5",on:{click:function(e){return t.deleteQuestion(s.question_id)}}},[t._v(" Delete ")]):t._e()],1)])])})),0):t._e()],1)},h=[];async function g(t){await fetch("/server/api/Questions/deleteQuestion.php",{method:"POST",body:JSON.stringify({question_id:t}),headers:{"Content-Type":"application/json"}})}var v=s(9509),f={name:"ForumView",data:function(){return{questions:{},isQuestionsExist:!1,username:this.$store.state.username}},methods:{showProfile(t){(0,v.Z)(t)},async deleteQuestion(t){await g(t),this.readAllQuestions()},async readAllQuestions(){const t=await fetch("/server/api/Questions/readAllQuestions.php",{method:"GET",headers:{Accept:"application/json"}}),e=await t.json();e.error?this.isQuestionsExist=!1:e.length&&(this.isQuestionsExist=!0,this.questions=e)}},mounted(){this.readAllQuestions()}},b=f,w=(0,d.Z)(b,p,h,!1,null,"1837257a",null),x=w.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container d-flex justify-content-center align-items-center vh-100"},[e("transition",{attrs:{name:"fade",appear:""}},[e("form",{staticClass:"rounded overflow-hidden p-sm-5 position-relative p-3 shadow text-white bg-gradient col col-md-9 col-lg-6 d-flex flex-column justify-content-center h-75",on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"position-absolute start-50 translate-middle fs-1 fw-bold text-capitalize",staticStyle:{top:"20%",color:"#ff6a3d","letter-spacing":"3px"}},[t._v(" register ")]),e("div",{staticClass:"position-absolute w-75 translate-middle start-50",staticStyle:{top:"50px"}},[e("div",{staticClass:"progress",staticStyle:{height:"3px"}},[e("div",{ref:"progress_bar",staticClass:"progress-bar orange-stage",staticStyle:{width:"0%"},attrs:{role:"progressbar","aria-label":"Progress","aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"}})]),e("button",{staticClass:"position-absolute top-0 start-0 translate-middle btn btn-sm text-white rounded-pill orange-stage",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"}},[t._v(" 1 ")]),e("button",{staticClass:"position-absolute top-0 start-50 translate-middle btn btn-sm rounded-pill text-white",class:{"orange-stage":2===t.activeStep||3===t.activeStep,"btn-secondary":1===t.activeStep},staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"}},[t._v(" 2 ")]),e("button",{staticClass:"position-absolute top-0 start-100 translate-middle btn btn-sm rounded-pill text-white",class:{"orange-stage":3===t.activeStep,"btn-secondary":1===t.activeStep||2===t.activeStep},staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"}},[t._v(" 3 ")])]),t.isTimerEnabled?e("div",{staticClass:"alert text-bg-success bg-gradient col-12 col-xl-9 mx-auto text-capitalize text-center"},[t._v(" registered successfully. redirect you in "+t._s(t.timer)+" seconds. ")]):t._e(),t.accountError?e("div",{staticClass:"alert text-bg-danger bg-gradient col-12 col-xl-9 mx-auto text-center text-capitalize"},[t._v(" "+t._s(t.accountError)+" ")]):t._e(),e("transition-group",{attrs:{name:"slide"}},[1===t.activeStep?e("div",{key:1,staticClass:"form-group"},[e("div",{staticClass:"col-12 col-xl-9 mx-auto"},[e("label",{staticClass:"form-label fs-5",attrs:{for:"username"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],ref:"username",staticClass:"form-control text-bg-dark border-0 shadow-none",attrs:{type:"text",id:"username",pattern:"[A-Z]([A-Za-z0-9\\s]+)",minlength:"3"},domProps:{value:t.username},on:{change:t.validateUserName,input:function(e){e.target.composing||(t.username=e.target.value)}}}),t.userNameErrors?e("div",t._l(t.userNameErrors,(function(s){return e("span",{key:s,staticClass:"text-danger d-block text-capitalize"},[t._v(t._s(s))])})),0):t._e()]),e("div",{staticClass:"mt-3 col-12 col-xl-9 mx-auto"},[e("label",{staticClass:"form-label fs-5",attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"email",staticClass:"form-control text-bg-dark border-0 shadow-none",attrs:{type:"email",id:"email"},domProps:{value:t.email},on:{change:t.validateEmail,input:function(e){e.target.composing||(t.email=e.target.value)}}}),t.emailError?e("span",{staticClass:"text-danger d-block text-capitalize"},[t._v(t._s(t.emailError))]):t._e()]),e("button",{staticClass:"d-block btn text-capitalize text-white bg-gradient col-12 col-xl-9 mx-auto mt-4 fs-4",staticStyle:{color:"#394f8a"},attrs:{disabled:t.isContinueDisabled1},on:{click:function(e){return e.preventDefault(),t.goToStep(2)}}},[t._v(" continue ")])]):t._e(),2===t.activeStep?e("div",{key:2,staticClass:"form-group"},[e("div",{staticClass:"col-12 col-xl-9 mx-auto"},[e("label",{staticClass:"form-label fs-5",attrs:{for:"password"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control text-bg-dark border-0 shadow-none",attrs:{type:"password",id:"password"},domProps:{value:t.password},on:{change:t.validatePassword,input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.passwordError?e("span",{staticClass:"text-danger d-block text-capitalize"},[t._v(t._s(t.passwordError))]):t._e()]),e("div",{staticClass:"mt-3 col-12 col-xl-9 mx-auto"},[e("label",{staticClass:"form-label fs-5",attrs:{for:"email"}},[t._v("Confirm Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm_password,expression:"confirm_password"}],staticClass:"form-control text-bg-dark border-0 shadow-none",attrs:{type:"password",id:"confirm_password"},domProps:{value:t.confirm_password},on:{change:t.validatePassword,input:function(e){e.target.composing||(t.confirm_password=e.target.value)}}}),t.passwordError?e("span",{staticClass:"text-danger d-block text-capitalize"},[t._v(t._s(t.passwordError))]):t._e()]),e("div",{staticClass:"row gap-2 justify-content-center col-12 col-xl-9 mx-auto mt-4"},[e("button",{staticClass:"btn text-capitalize btn-secondary col-5 bg-gradient",on:{click:function(e){return e.preventDefault(),t.goToStep(1)}}},[t._v(" back ")]),e("button",{staticClass:"btn text-capitalize text-white bg-gradient col-5",attrs:{disabled:t.isContinueDisabled2},on:{click:function(e){return e.preventDefault(),t.goToStep(3)}}},[t._v(" continue ")])])]):t._e(),3===t.activeStep?e("div",{key:3,staticClass:"form-group"},[e("div",{staticClass:"col-12 col-xl-9 mx-auto"},[e("label",{staticClass:"form-label fs-5 text-capitalize",attrs:{for:"date"}},[t._v("date of birth")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],ref:"date",staticClass:"form-control text-bg-dark border-0 shadow-none",attrs:{type:"date",id:"date",max:"2008-12-31",min:"1950-01-01"},domProps:{value:t.date},on:{change:t.validateDate,input:function(e){e.target.composing||(t.date=e.target.value)}}}),t.dateError?e("span",{staticClass:"text-danger d-block text-capitalize"},[t._v(t._s(t.dateError))]):t._e()]),e("div",{staticClass:"mt-3 col-12 col-xl-9 mx-auto"},[e("label",{staticClass:"form-label fs-5",attrs:{for:"about"}},[t._v("About (Optional)")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.about,expression:"about"}],staticClass:"form-control text-bg-dark border-0 shadow-none",staticStyle:{resize:"none",height:"100px"},attrs:{id:"about"},domProps:{value:t.about},on:{input:function(e){e.target.composing||(t.about=e.target.value)}}})]),e("div",{staticClass:"row gap-2 justify-content-center col-12 col-xl-9 mx-auto mt-4"},[e("button",{staticClass:"btn text-capitalize btn-secondary col-5 bg-gradient",attrs:{disabled:t.isTimerEnabled},on:{click:function(e){return e.preventDefault(),t.goToStep(2)}}},[t._v(" back ")]),e("button",{staticClass:"btn text-capitalize text-white bg-gradient col-5",attrs:{disabled:t.isContinueDisabled3},on:{click:function(e){return e.preventDefault(),t.goToStep()}}},[t._v(" continue ")])])]):t._e()]),e("span",{staticClass:"text-white text-capitalize position-absolute bottom-0 start-50 translate-middle fs-5 col-12 text-center"},[t._v("already have an account "),e("router-link",{staticClass:"text-decoration-none fw-bold",staticStyle:{color:"#ff6a3d"},attrs:{to:"/login"}},[t._v("LogIn")])],1)],1)])],1)},C=[],_={name:"LogInView",data:function(){return{username:"",email:"",password:"",confirm_password:"",date:"",about:"",activeStep:1,userNameErrors:[],accountError:"",emailError:"",passwordError:"",dateError:"",timer:3,isTimerEnabled:!1,timerInterval:null}},computed:{isContinueDisabled1(){return 0===this.username.length||0===this.email.length||!1===this.$refs.username.checkValidity()||!1===this.$refs.email.checkValidity()},isContinueDisabled2(){return this.password.length<5||this.confirm_password.length<5||this.password!==this.confirm_password},isContinueDisabled3(){return 0===this.date.length||!1===this.$refs.date.checkValidity()||!0===this.isTimerEnabled}},methods:{async goToStep(t=null){if(this.errors=[],1===t)return this.activeStep=t,void(this.$refs.progress_bar.style.width="0%");if(2!==t){if(3===t)return this.activeStep=t,void(this.$refs.progress_bar.style.width="100%");this.registerNewUser()}else{if(3===this.activeStep)return this.activeStep=t,void(this.$refs.progress_bar.style.width="50%");const e=await this.isUserExist();!1===e&&(this.activeStep=t,this.$refs.progress_bar.style.width="50%")}},async isUserExist(){this.accountError="",this.emailError="",this.userNameErrors=[];const t=await fetch("/server/api/Users/register.php",{method:"POST",body:JSON.stringify({username:this.username.trim(),email:this.email.trim()}),headers:{"Content-type":"application/json",Accept:"application/json"}}),e=await t.json();return e.accountError?(this.accountError=e.accountError,!0):e.emailError&&e.userNameError?(this.emailError=e.emailError,this.userNameErrors.push(e.userNameError),!0):e.emailError?(this.emailError=e.emailError,!0):e.userNameError?(this.userNameErrors.push(e.userNameError),!0):!e.success&&void 0},validateUserName(){if(!this.$refs.username.checkValidity())return this.userNameErrors.push("- Username must starts with capital letter."),this.userNameErrors.push("- Username must be three or more in length."),this.userNameErrors.push("- Special characters are not allowed."),this.accountError="",!1;this.userNameErrors=[]},validateEmail(){if(!this.$refs.email.checkValidity())return this.emailError="wrong email format",void(this.accountError="");this.emailError=""},validatePassword(){if(this.password!==this.confirm_password)return this.passwordError="passwords don't match each other.",this.accountError="",!1;this.passwordError=""},validateDate(){if(!this.$refs.date.checkValidity())return this.dateError="date must be between 01-01-1950 and 31-12-2005.",void(this.accountError="");this.dateError=""},async registerNewUser(){const t=await fetch("/server/api/Users/register.php",{method:"POST",body:JSON.stringify({username:this.username.trim(),email:this.email.trim(),password:this.password,date:this.date,about:this.about}),headers:{"Content-type":"application/json",Accept:"application/json"}}),e=await t.json();e.success&&(this.isTimerEnabled=!0)}},watch:{isTimerEnabled(t){t&&(this.timerInterval=setInterval((()=>{this.timer--}),1e3))},timer(t){0===t&&(clearInterval(this.timerInterval),this.$router.replace({name:"LogIn"}))}}},E=_,k=(0,d.Z)(E,y,C,!1,null,null,null),U=k.exports,S=s(3717),$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid text-white overflow-auto",attrs:{id:"profile"}},[t.isUploading?e("div",{staticClass:"overlay position-absolute top-0 end-0 w-100 h-100 d-flex justify-content-center align-items-center",staticStyle:{"background-color":"rgba(0, 0, 0, 0.5)","z-index":"20"}},[e("div",{staticClass:"loading text-bg-dark fs-4 col-2 p-3 d-flex justify-content-center align-items-center",staticStyle:{"z-index":"30",gap:"0 10px",width:"350px"}},[e("div",{staticClass:"text-center"},[t._v(t._s(t.status))]),"Loading..."===t.status?e("div",{staticClass:"spinner-border",attrs:{role:"status"}}):t._e()])]):t._e(),e("div",{staticClass:"d-flex flex-column flex-md-row h-100"},[e("div",{staticClass:"user-info col col-lg-4 col-xxl-3 border-end border-opacity-25 border-secondary"},[e("div",{staticClass:"vstack p-2"},[e("div",{staticClass:"position-relative",staticStyle:{width:"fit-content"}},[e("img",{staticClass:"rounded-3",attrs:{src:"/server/uploads/"+this.$store.getters.getUserImage,width:"200px",height:"200px"}}),e("form",{staticClass:"position-absolute bottom-0 end-0 m-1",staticStyle:{width:"fit-content"},attrs:{id:"myform",enctype:"multipart/form-data"}},[e("input",{attrs:{type:"hidden",name:"user_id"},domProps:{value:this.$store.getters.getUserId}}),t._m(0),e("input",{attrs:{id:"image-file",name:"img",type:"file",accept:"image/png,image/jpg,image/jpeg",hidden:""},on:{change:t.upload}})])]),e("div",{staticClass:"fs-3 fw-semibold"},[t._v(" "+t._s(this.$store.getters.getUserName)+" ")]),e("table",{staticClass:"table mt-3 table-borderless text-white"},[e("tbody",[e("tr",[e("td",[t._v("Email")]),e("td",[t._v(t._s(this.$store.getters.getUserEmail))])]),e("tr",[e("td",[t._v("Username")]),e("td",[t._v(t._s(this.$store.getters.getUserName))])]),e("tr",[e("td",[t._v("Date-Of-Birth")]),e("td",[t._v(t._s(this.$store.getters.getUserDate))])])])]),e("div",{staticClass:"p-2 mt-3"},[e("div",{staticClass:"mb-2 fs-2"},[t._v("About")]),e("p",{staticClass:"fs-5"},[t._v(" "+t._s(this.$store.getters.getUserAbout)+" ")])]),e("EditInfo")],1)]),e("div",{staticClass:"col h-100"},[e("div",{staticClass:"container-fluid h-100"},[e("transition",{attrs:{name:"slideUp",appear:""}},[t.isQuestionExist?t._e():e("div",{staticClass:"h-100 d-flex justify-content-center align-items-center text-capitalize fs-3 overflow-hidden"},[t._v(" you don't have any questions yet. ")])]),t.isQuestionExist?e("transition-group",{staticClass:"row p-2 questions row-cols-1 row-cols-lg-2 row-cols-xl-3 gy-3",staticStyle:{"overflow-y":"scroll"},attrs:{tag:"div",name:"fade",appear:""}},t._l(t.questions,(function(s){return e("div",{key:s.question_id,staticClass:"col"},[e("div",{staticClass:"card p-2 rounded-5 text-bg-dark",staticStyle:{height:"250px"}},[e("div",{staticClass:"hstack",staticStyle:{gap:"0 5px"}},[e("img",{staticClass:"rounded-circle",attrs:{src:"/server/uploads/"+t.userImage,width:"100px",height:"100px"}}),e("div",[t._v(t._s(t.username))])]),e("div",{staticClass:"card-body"},[e("p",{directives:[{name:"snip",rawName:"v-snip",value:{lines:2},expression:"{ lines: 2 }"}],staticClass:"card-text",staticStyle:{height:"50px","white-space":"pre-wrap"}},[t._v(" "+t._s(s.question)+" ")]),e("router-link",{staticClass:"view btn bg-gradient col-5 text-white",attrs:{to:{path:`question/${s.question_id}`}}},[t._v(" View ")]),e("button",{staticClass:"btn bg-danger bg-gradient text-white mx-2 col-5",on:{click:function(e){return t.deleteQuestion(s.question_id)}}},[t._v(" Delete ")])],1)])])})),0):t._e()],1)])])])},N=[function(){var t=this,e=t._self._c;return e("label",{staticClass:"camera rounded-circle fs-5 d-flex justify-content-center align-items-center bg-dark bg-gradient",staticStyle:{width:"35px",height:"35px"},attrs:{for:"image-file",role:"button"}},[e("i",{staticClass:"fa fa-camera"})])}],I=function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"btn text-bg-dark bg-gradient text-capitalize w-100 mt-5",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}},[t._v(" edit info ")]),e("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered"},[e("div",{staticClass:"modal-content bg-dark"},[t._m(0),e("div",{staticClass:"modal-body"},[e("form",{staticClass:"row g-3",on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"form-label text-capitalize",attrs:{for:"email"}},[t._v("email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],ref:"email",staticClass:"form-control bg-dark text-white shadow-none",attrs:{type:"email",id:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),t.emailError?e("span",{staticClass:"text-danger d-block text-capitalize"},[t._v(" "+t._s(t.emailError)+" ")]):t._e()]),e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"form-label text-capitalize",attrs:{for:"password"}},[t._v("password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control bg-dark text-white shadow-none",attrs:{type:"password",id:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t.passwordError?e("span",{staticClass:"text-danger d-block text-capitalize"},[t._v(" "+t._s(t.passwordError)+" ")]):t._e()]),e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"form-label text-capitalize",attrs:{for:"username"}},[t._v("username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],ref:"username",staticClass:"form-control bg-dark text-white shadow-none",attrs:{type:"text",id:"username",pattern:"[A-Z]([A-Za-z0-9\\s]+)",minlength:"3"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),t.userNameErrors?e("div",t._l(t.userNameErrors,(function(s){return e("span",{key:s,staticClass:"text-danger d-block text-capitalize"},[t._v(" "+t._s(s)+" ")])})),0):t._e()]),e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"form-label text-capitalize",attrs:{for:"date"}},[t._v("date of birth")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.date,expression:"user.date"}],ref:"date",staticClass:"form-control bg-dark text-white shadow-none",attrs:{type:"date",id:"date",max:"2008-12-31",min:"1950-01-01"},domProps:{value:t.user.date},on:{input:function(e){e.target.composing||t.$set(t.user,"date",e.target.value)}}}),t.dateError?e("span",{staticClass:"text-capitalize d-block text-danger"},[t._v(" "+t._s(t.dateError)+" ")]):t._e()]),e("div",{staticClass:"col"},[e("label",{staticClass:"form-label text-capitalize",attrs:{for:"about"}},[t._v("about")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user.about,expression:"user.about"}],staticClass:"form-control bg-dark text-white shadow-none",staticStyle:{height:"200px",resize:"none","caret-color":"#fff"},attrs:{type:"text",id:"about"},domProps:{value:t.user.about},on:{input:function(e){e.target.composing||t.$set(t.user,"about",e.target.value)}}})])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn bg-gradient text-white",staticStyle:{"background-color":"gray"},attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v(" Close ")]),e("button",{ref:"update",staticClass:"btn bg-gradient text-white",staticStyle:{"background-color":"#394f8a"},attrs:{disabled:t.isUpdateDisabled,type:"button"},on:{click:function(e){return e.preventDefault(),t.update.apply(null,arguments)}}},[t._v(" Update ")])])])])])])},P=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h1",{staticClass:"modal-title text-capitalize"},[t._v("edit personal info")])])}],j={name:"EditInfo",data(){return{user:{user_id:this.$store.getters.getUserId,email:this.$store.getters.getUserEmail,password:this.$store.getters.getUserPassword,username:this.$store.getters.getUserName,about:this.$store.getters.getUserAbout,date:this.$store.getters.getUserDate},emailError:"",userNameErrors:[],passwordError:"",dateError:""}},computed:{isUpdateDisabled(){return this.user.email===this.$store.getters.getUserEmail&&this.user.password===this.$store.getters.getUserPassword&&this.user.username===this.$store.getters.getUserName&&this.user.about===this.$store.getters.getUserAbout&&this.user.date===this.$store.getters.getUserDate||0===this.user.username.length||0===this.user.password.length||0===this.user.email.length||0===this.user.date.length}},methods:{async update(){if(!0===this.validateUserInfo())return;const t=await fetch("/server/api/Users/updateUserInfo.php",{method:"POST",body:JSON.stringify(this.user),headers:{"Content-Type":"application/json",Accept:"application/json"}}),e=await t.json();e.error||(this.$store.commit("setUserName",e.username),this.$store.commit("setUserPassword",e.password),this.$store.commit("setUserEmail",e.email),this.$store.commit("setUserDate",e.date),this.$store.commit("setUserAbout",e.about),this.$router.go())},validateUserInfo(){var t=!1;return this.emailError="",this.userNameErrors=[],this.passwordError="",this.$refs.email.checkValidity()||(t=!0,this.emailError="wrong email format."),this.$refs.username.checkValidity()||(t=!0,this.userNameErrors.push("- username must starts with capital letter."),this.userNameErrors.push("- username must be three or more in length."),this.userNameErrors.push("- special characters are not allowed.")),this.user.password.length<5&&(t=!0,this.passwordError="password must be at least five in length."),this.$refs.date.checkValidity()||(t=!0,this.dateError="date must be between 01-01-1950 and 31-12-2005."),t}}},O=j,z=(0,d.Z)(O,I,P,!1,null,null,null),q=z.exports;async function A(t){const e=await fetch("/server/api/Questions/readUserQuestions.php",{method:"POST",body:JSON.stringify({user_id:t}),headers:{Accept:"application/json","Content-type":"application/json"}}),s=await e.json();return s}function T(t){const e=document.querySelector("#header").offsetHeight,s=window.innerHeight,a=s-e;document.querySelector(t).setAttribute("style",`height: ${a}px`)}var Z={name:"ProfileView",components:{EditInfo:q},data:function(){return{isUploading:!1,status:"",questions:[],isQuestionExist:!1,username:this.$store.getters.getUserName,userImage:this.$store.getters.getUserImage}},methods:{upload:async function(t){if(t.target.files[0]){const t=document.getElementById("myform"),e=new FormData(t);this.status="Loading...",this.isUploading=!0;const s=await fetch("/server/api/Images/updateImage.php",{method:"POST",body:e}),a=await s.json();a.userImage&&this.$store.commit("setUserImage",a.userImage),a.error&&(this.status=a.error),setTimeout((()=>{this.isUploading=!1,this.$router.go()}),2e3)}},async readUserQuestions(){const t=await A(this.$store.getters.getUserId);t.error&&(this.isQuestionExist=!1),t.length&&(this.isQuestionExist=!0,this.questions=t)},async deleteQuestion(t){await g(t),this.readUserQuestions()}},mounted(){T("#profile"),this.readUserQuestions()}},Q=Z,D=(0,d.Z)(Q,$,N,!1,null,"61c394be",null),M=D.exports,L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid text-white overflow-auto",attrs:{id:"user-profile"}},[t.isUserExist?t._e():e("div",{staticClass:"text-capitalize fs-3 h-100 d-flex justify-content-center align-items-center"},[t._v(" this user does not exist. ")]),t.isUserExist?e("div",{staticClass:"d-flex flex-column flex-md-row h-100"},[e("div",{staticClass:"user-info col col-lg-4 col-xxl-3 border-end border-opacity-25 border-secondary"},[e("div",{staticClass:"vstack p-2"},[t.userImage?e("img",{staticClass:"rounded-3",attrs:{src:"/server/uploads/"+t.userImage,width:"200px",height:"200px"}}):t._e(),e("div",{staticClass:"fs-3 fw-semibold"},[t._v(" "+t._s(t.username)+" ")]),e("table",{staticClass:"table mt-3 table-borderless text-white"},[e("tbody",[e("tr",[e("td",[t._v("Username")]),e("td",[t._v(t._s(t.username))])]),e("tr",[e("td",[t._v("Date-Of-Birth")]),e("td",[t._v(t._s(t.date))])])])]),e("div",{staticClass:"p-2 mt-3"},[e("div",{staticClass:"mb-2 fs-2"},[t._v("About")]),e("p",{staticClass:"fs-5"},[t._v(" "+t._s(t.about)+" ")])])])]),e("div",{staticClass:"col h-100"},[e("div",{staticClass:"container-fluid h-100"},[e("transition",{attrs:{name:"slideUp",appear:""}},[t.isQuestionExist?t._e():e("div",{staticClass:"h-100 d-flex justify-content-center align-items-center text-capitalize fs-3 overflow-hidden"},[t._v(" this user does not have any questions yet. ")])]),t.isQuestionExist?e("transition-group",{staticClass:"row p-2 questions row-cols-1 row-cols-lg-2 row-cols-xl-3 gy-3",staticStyle:{"overflow-y":"scroll"},attrs:{tag:"div",name:"fade",appear:""}},t._l(t.questions,(function(s){return e("div",{key:s.question_id,staticClass:"col"},[e("div",{staticClass:"card p-2 rounded-5 text-bg-dark",staticStyle:{height:"250px"}},[e("div",{staticClass:"hstack",staticStyle:{gap:"0 5px"}},[e("img",{staticClass:"rounded-circle",attrs:{src:"/server/uploads/"+t.userImage,width:"100px",height:"100px"}}),e("div",[t._v(t._s(t.username))])]),e("div",{staticClass:"card-body"},[e("p",{directives:[{name:"snip",rawName:"v-snip",value:{lines:2},expression:"{ lines: 2 }"}],staticClass:"card-text",staticStyle:{height:"50px","white-space":"pre-wrap"}},[t._v(" "+t._s(s.question)+" ")]),e("router-link",{staticClass:"view btn bg-gradient col-5 text-white",attrs:{to:{path:`/question/${s.question_id}`}}},[t._v(" View ")])],1)])])})),0):t._e()],1)])]):t._e()])},V=[],B={name:"UserProfileView",data(){return{userImage:null,username:"",date:null,about:"",questions:[],interval:null,isUserExist:!0,isQuestionExist:!1}},methods:{setHeightOfProfile(){const t=document.querySelector("#header").offsetHeight,e=window.innerHeight,s=e-t;document.querySelector("#user-profile").setAttribute("style",`height: ${s}px`)},async readUserData(){const t=await fetch("/server/api/Users/readUserData.php",{method:"POST",body:JSON.stringify({user_id:this.$route.params.user_id}),headers:{"Content-type":"application/json",Accept:"application/json"}}),e=await t.json();e.error?this.isUserExist=!1:e.username&&(this.isUserExist=!0,this.username=e.username,this.userImage=e.image,this.date=e.date,this.about=e.about,this.readUserQuestions(),this.interval=setInterval((()=>{this.getMessages()}),500))},async readUserQuestions(){const t=await A(this.$route.params.user_id);t.error&&(this.isQuestionExist=!1),t.length&&(this.isQuestionExist=!0,this.questions=t)}},watch:{"$route.params.user_id"(){this.readUserData()}},async mounted(){this.setHeightOfProfile(),this.readUserData()},destroyed(){clearInterval(this.interval)}},J=B,R=(0,d.Z)(J,L,V,!1,null,"ad6e58ba",null),F=R.exports,H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid",attrs:{id:"messages"}},[e("div",{staticClass:"row h-100"},[e("div",{staticClass:"col-6 h-100 col-md-4 text-bg-dark border-end border-secondary border-opacity-25"},[e("div",{staticClass:"container pt-3 h-100"},[e("div",{staticClass:"position-relative"},[e("i",{staticClass:"fa-solid fa-magnifying-glass position-absolute text-white top-50 translate-middle fs-6",staticStyle:{left:"15px"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pattern,expression:"pattern"}],staticClass:"form-control text-bg-dark shadow-none",staticStyle:{"padding-left":"28px"},attrs:{type:"search",placeholder:"Search Conversations"},domProps:{value:t.pattern},on:{input:function(e){e.target.composing||(t.pattern=e.target.value)}}})]),e("div",{staticClass:"messages mt-3 overflow-auto",staticStyle:{height:"calc(100% - 60px)"}},[t.areConversationsExist?t._e():e("div",{staticClass:"h-100 text-capitalize fs-5 d-flex justify-content-center align-items-center"},[t._v(" you don't have conversations yet. ")]),t.areConversationsExist?e("div",{staticClass:"vstack gap-4"},t._l(t.conversationsFilter,(function(s){return e("div",{key:s.message_id},[s.sender===t.myId?e("div",{staticClass:"hstack gap-2",attrs:{role:"button"},on:{click:function(e){return t.openConversation(s.receiver,s.receiver_name,s.receiver_image,e)}}},[e("img",{staticClass:"rounded-circle",attrs:{src:"/server/uploads/ "+s.receiver_image,alt:"userImage",width:"80px",height:"80px"}}),e("div",{staticClass:"pt-2"},[e("span",{staticStyle:{"font-size":"1.2em"}},[t._v(t._s(s.receiver_name))]),e("p",{staticClass:"text-nowrap overflow-hidden",staticStyle:{width:"100px","text-overflow":"ellipsis"}},[t._v(" "+t._s(s.message)+" ")])])]):e("div",{staticClass:"hstack gap-2 p-2",class:{"bg-primary":!s.is_read},attrs:{role:"button"},on:{click:function(e){return t.openConversation(s.sender,s.sender_name,s.sender_image,e)}}},[e("img",{staticClass:"rounded-circle",attrs:{src:"/server/uploads/"+s.sender_image,alt:"userImage",width:"80px",height:"80px"}}),e("div",{staticClass:"pt-2"},[e("span",{staticStyle:{"font-size":"1.2em"}},[t._v(t._s(s.sender_name))]),e("p",{staticClass:"text-nowrap overflow-hidden",staticStyle:{width:"100px","text-overflow":"ellipsis"}},[t._v(" "+t._s(s.message)+" ")])])])])})),0):t._e()])])]),e("div",{staticClass:"col-6 col-md-8 h-100 text-bg-dark p-0"},[this.receiver?e("div",{staticClass:"text-bg-dark shadow-sm hstack gap-2 p-2",staticStyle:{height:"66px"}},[t.conversationImage?e("img",{staticClass:"rounded-circle",attrs:{src:"/server/uploads/"+t.conversationImage,alt:"userImage",width:"50px",height:"50px"}}):t._e(),t.conversationName?e("span",[t._v(t._s(t.conversationName))]):t._e()]):t._e(),e("div",{ref:"messagesContainer",staticClass:"container-fluid",staticStyle:{height:"calc(100% - 66px)"}},[e("div",{ref:"messagesBox",staticClass:"messages-box p-2 gap-3 d-flex flex-column-reverse overflow-auto"},t._l(t.messages,(function(s){return e("div",{key:s.message_id,staticClass:"hstack gap-1"},[e("img",{staticClass:"rounded-circle",attrs:{src:"/server/uploads/"+s.sender_image,alt:"userImage",width:"50px",height:"50px"}}),e("div",{staticClass:"rounded-2 p-2",class:{"text-bg-secondary":s.sender===t.myId,"text-bg-primary":s.sender!==t.myId},staticStyle:{"white-space":"pre-wrap"}},[t._v(" "+t._s(s.message)+" ")])])})),0),this.receiver?e("div",{staticClass:"position-relative"},[e("i",{staticClass:"fa-solid fa-paper-plane position-absolute top-50 translate-middle end-0 fs-5",on:{click:t.sendMessage}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control shadow-none text-bg-dark",staticStyle:{height:"20px",resize:"none"},attrs:{type:"text",placeholder:"Send a Message"},domProps:{value:t.message},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.sendMessage.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:(e.preventDefault(),void(t.message+="\n")):null}],input:function(e){e.target.composing||(t.message=e.target.value)}}})]):t._e()])])])])},K=[],W={data(){return{conversations:[],areConversationsExist:!1,messages:[],message:"",receiver:null,conversationName:"",conversationImage:"",myId:this.$store.getters.getUserId,messagesInterval:null,conversationsInterval:null,pattern:""}},methods:{async readConversations(){const t=await fetch("/server/api/Messages/readConversations.php",{method:"POST",body:JSON.stringify({user_id:this.$store.getters.getUserId}),headers:{"Content-Type":"application/json",Accept:"application/json"}}),e=await t.json();e.error?this.areConversationsExist=!1:e.length&&(this.areConversationsExist=!0,this.conversations=e)},async openConversation(t,e,s,a){a.target.classList.contains("bg-primary")&&await this.setMessageAsRead(t),clearInterval(this.messagesInterval),this.setConversationReceiver(t,e,s),this.getMessages(),this.messagesInterval=setInterval((()=>{this.getMessages()}),1e3)},async getMessages(){const t=await fetch("/server/api/Messages/readMessages.php",{method:"POST",body:JSON.stringify({sender:this.$store.getters.getUserId,receiver:this.receiver}),headers:{"Content-Type":"application/json",Accept:"application/json"}}),e=await t.json();this.messages=e},async sendMessage(){this.message.trim()&&(await fetch("/server/api/Messages/createMessage.php",{method:"POST",body:JSON.stringify({message:this.message.trim(),sender:this.$store.getters.getUserId,receiver:this.receiver}),headers:{"Content-type":"application/json"}}),this.message="")},setHeightOfMessagesBox(){const t=this.$refs.messagesContainer.offsetHeight,e=38,s=t-e;this.$refs.messagesBox.setAttribute("style",`height: ${s-10}px`)},setConversationReceiver(t,e,s){this.conversationName=e,this.conversationImage=s,this.receiver=t},async setMessageAsRead(t){await fetch("/server/api/Messages/updateMessageStatus.php",{method:"POST",body:JSON.stringify({sender:t,receiver:this.$store.getters.getUserId}),headers:{"Content-Type":"application/json"}})}},computed:{conversationsFilter(){return this.conversations.filter((t=>t.sender===this.myId?t.receiver_name.startsWith(this.capitalizePattern):t.sender_name.startsWith(this.capitalizePattern)))},capitalizePattern(){return""!==this.pattern?this.pattern.charAt(0).toUpperCase()+this.pattern.slice(1):""}},mounted(){T("#messages"),this.setHeightOfMessagesBox(),this.readConversations(),this.conversationsInterval=setInterval((()=>{this.readConversations()}),1e3)},destroyed(){clearInterval(this.messagesInterval),clearInterval(this.conversationsInterval)}},G=W,X=(0,d.Z)(G,H,K,!1,null,null,null),Y=X.exports;a.ZP.use(r.Z);const tt=[{path:"/",redirect:{name:"LogIn"}},{path:"/login",name:"LogIn",component:m,beforeEnter:(t,e,s)=>{!0===i.Z.state.authenticated?s("/forum"):s()}},{path:"/question/:id",name:"question",component:()=>s.e(723).then(s.bind(s,4723)),beforeEnter:(t,e,s)=>{!1===i.Z.state.authenticated?s("/login"):s()}},{path:"/forum",name:"forum",component:x,beforeEnter:(t,e,s)=>{!1===i.Z.state.authenticated?s("/login"):s()}},{path:"/profile",name:"profile",component:M,beforeEnter:(t,e,s)=>{!1===i.Z.state.authenticated?s("/login"):s()}},{path:"/profile/:user_id",name:"userProfile",component:F,beforeEnter:(t,e,s)=>{!1===i.Z.state.authenticated?s("/login"):s()}},{path:"/askQuestion",name:"askQuestion",component:S.Z,beforeEnter:(t,e,s)=>{!1===i.Z.state.authenticated?s("/login"):s()}},{path:"/register",name:"register",component:U,beforeEnter:(t,e,s)=>{!0===i.Z.state.authenticated?s("/forum"):s()}},{path:"/messages",name:"messages",component:Y,beforeEnter:(t,e,s)=>{!1===i.Z.state.authenticated?s("/login"):s()}}],et=new r.Z({mode:"history",base:"/",routes:tt});var st=et},4239:function(t,e,s){var a=s(6369),r=s(3822),i=s(2415);a.ZP.use(r.ZP),e["Z"]=new r.ZP.Store({plugins:[(0,i.Z)({storage:window.localStorage})],state:{authenticated:!1,username:null,userImage:null,user_id:null,userEmail:null,date:null,about:null,password:null},getters:{getUserName:t=>t.username,getUserImage:t=>t.userImage,getUserEmail:t=>t.userEmail,getUserDate:t=>t.date,getUserAbout:t=>t.about,getUserPassword:t=>t.password,getUserId:t=>t.user_id},mutations:{setAuthentication(t,e){t.authenticated=e},setUserName(t,e){t.username=e},setUserImage(t,e){t.userImage=e},setUserId(t,e){t.user_id=e},setUserEmail(t,e){t.userEmail=e},setUserDate(t,e){t.date=e},setUserAbout(t,e){t.about=e},setUserPassword(t,e){t.password=e}},actions:{},modules:{}})}},e={};function s(a){var r=e[a];if(void 0!==r)return r.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,a,r,i){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],r=t[d][1],i=t[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&i||o>=i)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(n=!1,i<o&&(o=i));if(n){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[a,r,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,a){return s.f[a](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/"+t+".6a1dee6c.js"}}(),function(){s.miniCssF=function(t){return"css/"+t+".86b07e94.css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="ask-answer:";s.l=function(a,r,i,o){if(t[a])t[a].push(r);else{var n,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==e+i){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",e+i),n.src=a),t[a]=[r];var m=function(e,s){n.onerror=n.onload=null,clearTimeout(p);var r=t[a];if(delete t[a],n.parentNode&&n.parentNode.removeChild(n),r&&r.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t=function(t,e,s,a){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var i=function(i){if(r.onerror=r.onload=null,"load"===i.type)s();else{var o=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=n,r.parentNode.removeChild(r),a(l)}};return r.onerror=r.onload=i,r.href=e,document.head.appendChild(r),r},e=function(t,e){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var r=s[a],i=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===t||i===e))return r}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){r=o[a],i=r.getAttribute("data-href");if(i===t||i===e)return r}},a=function(a){return new Promise((function(r,i){var o=s.miniCssF(a),n=s.p+o;if(e(o,n))return r();t(a,n,r,i)}))},r={143:0};s.f.miniCss=function(t,e){var s={723:1};r[t]?e.push(r[t]):0!==r[t]&&s[t]&&e.push(r[t]=a(t).then((function(){r[t]=0}),(function(e){throw delete r[t],e})))}}(),function(){var t={143:0};s.f.j=function(e,a){var r=s.o(t,e)?t[e]:void 0;if(0!==r)if(r)a.push(r[2]);else{var i=new Promise((function(s,a){r=t[e]=[s,a]}));a.push(r[2]=i);var o=s.p+s.u(e),n=new Error,l=function(a){if(s.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var i=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;n.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",n.name="ChunkLoadError",n.type=i,n.request=o,r[1](n)}};s.l(o,l,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,i,o=a[0],n=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(l)var d=l(s)}for(e&&e(a);c<o.length;c++)i=o[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},a=self["webpackChunkask_answer"]=self["webpackChunkask_answer"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(9622)}));a=s.O(a)})();
//# sourceMappingURL=app.e8a4a6cd.js.map