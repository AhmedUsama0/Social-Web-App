"use strict";(self["webpackChunkask_answer"]=self["webpackChunkask_answer"]||[]).push([[723],{4723:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mt-5"},[e("transition",{attrs:{name:"fade",appear:""}},[t.isQuestionExist?t._e():e("div",{staticClass:"d-flex justify-content-center align-items-center text-capitalize text-white fs-2",staticStyle:{height:"70vh"}},[t._v(" this question doesn't exist. ")]),t.isQuestionExist?e("div",{staticClass:"card bg-dark text-white pt-2",staticStyle:{"min-height":"300px"}},[e("div",{staticClass:"hstack gap-2",staticStyle:{width:"fit-content"},attrs:{role:"button"},on:{click:function(e){return t.showProfile(t.question.user_id)}}},[e("img",{staticClass:"ms-3 rounded-circle",attrs:{src:"/server/uploads/"+t.question.image,width:"50px",height:"50px"}}),e("div",[t._v(t._s(t.question.username))])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-text",staticStyle:{"white-space":"pre-wrap"}},[t._v(" "+t._s(t.question.question)+" ")]),e("div",{staticClass:"form-floating mt-4 text-dark"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"answer"}],staticClass:"form-control bg-dark shadow-none text-white",staticStyle:{resize:"none"},attrs:{placeholder:"Leave an answer here",id:"floatingTextarea"},domProps:{value:t.answer},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.send.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:(e.preventDefault(),void(t.answer+="\n")):null}],input:function(e){e.target.composing||(t.answer=e.target.value)}}}),e("label",{staticClass:"text-capitalize text-white",attrs:{for:"floatingTextarea"}},[t._v("Enter your answer here")])])]),e("hr"),e("UsersAnswers",{attrs:{allAnswers:t.allAnswers,user_id:t.user_id,username:t.username,isAnswersExist:t.isAnswersExist}})],1):t._e()])],1)},n=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"overflow-hidden"},[e("transition",{attrs:{name:"popup",appear:""}},[t.isAnswersExist?t._e():e("div",{staticClass:"text-capitalize fs-2 p-3 text-center"},[t._v(" this question has no answers. ")])]),t.isAnswersExist?e("div",{staticClass:"vstack gap-3 mt-2"},[e("transition-group",{attrs:{name:"fade",appear:""}},t._l(t.allAnswers,(function(s){return e("div",{key:s.answer_id,staticClass:"card-body position-relative border-bottom border-secondary"},[e("div",{staticClass:"hstack gap-2",staticStyle:{width:"fit-content"},attrs:{role:"button"},on:{click:function(e){return t.showProfile(s.user_id)}}},[e("img",{staticClass:"rounded-circle",attrs:{src:"/server/uploads/"+s.image,width:"50px",height:"50px"}}),e("div",[t._v(t._s(s.username))])]),e("div",{staticClass:"card-text mt-2",staticStyle:{"white-space":"pre-wrap"}},[t._v(" "+t._s(s.answer)+" ")]),s.username===t.username?e("div",{staticClass:"dropup position-absolute top-50 end-0 translate-middle"},[e("button",{staticClass:"dots btn text-white fs-3 shadow-none pt-0",attrs:{type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" ... ")]),e("ul",{staticClass:"dropdown-menu bg-dark"},[e("li",{staticClass:"dropdown-item text-white",attrs:{role:"button"},on:{click:function(e){return t.deleteAnswer(s.answer_id)}}},[t._v(" Delete ")])])]):t._e()])})),0)],1):t._e()],1)},r=[],o=s(9509),l={name:"UsersAnswers",props:["allAnswers","user_id","username","isAnswersExist"],methods:{showProfile(t){(0,o.Z)(t)},deleteAnswer:function(t){fetch("/server/api/Answers/deleteAnswer.php",{method:"POST",body:JSON.stringify({answer_id:t}),headers:{"Content-type":"application/json"}})}}},d=l,u=s(1001),c=(0,u.Z)(d,a,r,!1,null,"1d09ab63",null),p=c.exports,h={name:"UserQuestionView",components:{UsersAnswers:p},data:function(){return{question:[],allAnswers:[],answer:"",interval:null,isQuestionExist:!1,isAnswersExist:!0}},computed:{username(){return this.$store.state.username},question_id(){return this.$route.params.id},user_id(){return this.$store.state.user_id}},methods:{showProfile(t){(0,o.Z)(t)},send(){this.answer.trim()&&(fetch("/server/api/Answers/createAnswer.php",{method:"POST",body:JSON.stringify({question_id:this.question_id,answer:this.answer.trim(),user_id:this.user_id}),headers:{"Content-type":"application/json"}}),this.answer="")},async getAnswers(){const t=await fetch("/server/api/Answers/readAnswers.php",{method:"POST",body:JSON.stringify({question_id:this.question_id}),headers:{Accept:"application/json","Content-type":"application/json"}}),e=await t.json();e.error&&(this.isAnswersExist=!1),e.length&&(this.isAnswersExist=!0,this.allAnswers=e)},async getQuestion(){const t=await fetch("/server/api/Questions/readOneQuestion.php",{method:"POST",body:JSON.stringify({question_id:this.question_id}),headers:{Accept:"application/json","Content-type":"application/json"}}),e=await t.json();e.error&&(this.isQuestionExist=!1),e.question&&(this.isQuestionExist=!0,this.question=e,this.interval=setInterval((()=>{this.getAnswers()}),500))}},mounted(){this.getQuestion()},destroyed(){clearInterval(this.interval)}},w=h,f=(0,u.Z)(w,i,n,!1,null,"71f68541",null),v=f.exports}}]);
//# sourceMappingURL=723.6a1dee6c.js.map